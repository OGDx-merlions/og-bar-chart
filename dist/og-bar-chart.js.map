{"version":3,"sources":["og-bar-chart.es6.js"],"names":["Polymer","is","properties","unit","type","String","value","width","Number","height","data","Array","observer","axisConfig","Object","margin","_selections","ready","scopeSubtree","$","chart","draw","_massageData","_setDefaults","_prepareChartingArea","_prepareAxes","_drawAxes","drawBars","_drawGridLines","fire","_redraw","newData","oldData","dom","node","innerHTML","forEach","d","y","_setDefaultMargin","x","axisColor","customStyle","gridColor","updateStyles","top","right","bottom","left","adjustedWidth","adjustedHeight","d3","Px","svg","select","append","attr","scaleBand","rangeRound","padding","scaleLinear","clamp","domain","map","start","max","me","xAxis","axisBottom","_xAxis","ticks","call","yAxis","axisLeft","_yAxis","text","selectAll","enter","style","i","series","length","color","bandwidth","on","selectionColor","total","hideGrid","totalGridLines","tickSize","tickFormat"],"mappings":"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","file":"og-bar-chart.js","sourcesContent":["(function() {\n  Polymer({\n\n    is: 'og-bar-chart', \n\n    properties: {\n      /**\n      * Unit for Y-Axis values\n      *\n      * @property unit\n      */\n      unit: {\n        type: String,\n        value: \"\"\n\t\t\t},\n\t\t\t/**\n      * Chart Width\n      *\n      * @property width\n      */\n      width: {\n        type: Number,\n        value: 960\n\t\t\t},\n\t\t\t/**\n      * Chart Height\n      *\n      * @property height\n      */\n      height: {\n        type: Number,\n        value: 300\n      },\n      /**\n\t\t\t* This property is an Array of data.\n\t\t\tMember of each tab data looks like this\n\t\t\t`{\"date\":\"2017-05-01T16:00:00.000Z\",\"actual\":\"11960\",\"target\":\"12950\",\"design\":\"13960\"}`\n      *\n      * @property data\n      */\n\t\t\tdata: {\n\t\t\t\ttype: Array,\n\t\t\t\tvalue() {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n        observer: \"_redraw\"\n      },\n      /**\n       * Axis Configuration\n       * Eg: {\n\t\t\t\t\t\t\"x\": {\n\t\t\t\t\t\t\t\"tickFormat\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"y\": {\n\t\t\t\t\t\t\t\"tickFormat\": \".3s\",\n\t\t\t\t\t\t\t\"hideGrid\": true,\n\t\t\t\t\t\t\t\"start\": 600\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n       * @property axisConfig\n       */\n\t\t\taxisConfig: {\n\t\t\t\ttype: Object,\n\t\t\t\tvalue: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t\"x\": {\n\t\t\t\t\t\t\t\"tickFormat\": \"\",\n              \"gridColor\": \"steelblue\",\n              \"selectionColor\": \"fuchsia\",\n              \"series\": [\n                {\"color\": \"steelblue\"},\n                {\"color\": \"yellow\"},\n                {\"color\": \"green\"},\n                {\"color\": \"red\"},\n                {\"color\": \"gray\"}\n              ]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"y\": {\n\t\t\t\t\t\t\t\"tickFormat\": \".3s\",\n\t\t\t\t\t\t\t\"start\": 0,\n\t\t\t\t\t\t\t\"gridColor\": \"steelblue\"\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n        observer: \"_redraw\"\n      },\n      /**\n\t\t\t* Margin for the charts\n\t\t\tEg:\n\t\t\t`{top: 20, right: 20, bottom: 30, left: 50}`\n      *\n      * @property margins\n      */\n      margin: {\n        type: Object,\n        value() {\n          return {};\n        }\n      },\n      _selections: {\n        type: Object,\n        value() {\n          return {\"total\": 0};\n        }\n      }\n    },\n\n    ready() {\n      this.scopeSubtree(this.$.chart, true);\n    },\n\n    draw: function() {\n      if(!this.data) {return;}\n      let data = this._massageData(this.data);\n\t\t\tthis._setDefaults();\n      this._prepareChartingArea();\n\t\t\tthis._prepareAxes(data);\n      this._drawAxes(data);\n      this.drawBars(data);\n\t\t\tthis._drawGridLines(data);\n      this.fire(\"chart-drawn\", {});\n    },\n    \n    _redraw: function(newData, oldData) {\n\t\t\tPolymer.dom(this.$.chart).node.innerHTML = \"\";\n\t\t\tthis.draw();\n    },\n\n    _massageData(data) {\n\t\t\tdata.forEach((d) => {\n\t\t\t\td.y = +d.y;\n\t\t\t});\n\t\t\treturn data;\n\t\t},\n\n    _setDefaults() {\n\t\t\t// set the dimensions and margins of the graph\n\t\t\tthis._setDefaultMargin();\n\t\t\t\n\t\t\tthis.axisConfig = this.axisConfig || {};\n\t\t\tthis.axisConfig.x = this.axisConfig.x || {};\n      this.axisConfig.y = this.axisConfig.y || {};\n\t\t\tthis.axisConfig.x.axisColor = this.axisConfig.x.axisColor || '#95a5ae';\n      this.axisConfig.y.axisColor = this.axisConfig.y.axisColor || '#95a5ae';\n      this.customStyle['--x-grid-color'] = this.axisConfig.x.gridColor || this.axisConfig.x.axisColor;\n\t\t\tthis.customStyle['--y-grid-color'] = this.axisConfig.y.gridColor || this.axisConfig.y.axisColor;\n\t\t\tthis.customStyle['--font-size'] = \"11px\";\n\t\t\tthis.updateStyles();\n    },\n    \n    _setDefaultMargin() {\n\t\t\tthis.margin = this.margin || {top: 20, right: 20, bottom: 30, left: 50};\n      this.margin.top = this.margin.top ? this.margin.top : 20;\n      this.margin.right = this.margin.right ? this.margin.right : 20;\n      this.margin.bottom = this.margin.bottom ? this.margin.bottom : 30;\n      this.margin.left = this.margin.left ? this.margin.left : 50;\n      \n\t\t\tthis.margin.left =  this.margin.left + 30;\n\t\t\tthis.margin.top =  this.margin.top + 30;\n\t\t\tthis.adjustedWidth = this.width - this.margin.left - this.margin.right,\n\t\t\tthis.adjustedHeight = this.height - this.margin.top - this.margin.bottom;\n    },\n    \n    _prepareChartingArea() {\n\t\t\tlet d3 = Px.d3;\n\t\t\tthis.svg = d3.select(this.$.chart).append(\"svg\")\n\t\t\t\t\t.attr(\"viewBox\", \"0 0 \"+this.width+\" \"+this.height)\n\t\t\t\t\t.attr(\"width\", \"100%\")\n\t\t\t\t\t.attr(\"height\", \"100%\")\n\t\t\t\t\t.attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"transform\",\n\t\t\t\t\t \t\t\t\"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\t\t},\n\t\t_prepareAxes(data) {\n\t\t\tlet d3 = Px.d3;\n      this.x = d3.scaleBand().rangeRound([0, this.adjustedWidth])\n        .padding(this.axisConfig.x.padding || 0.3);\n\t\t\tthis.y = d3.scaleLinear().rangeRound([this.adjustedHeight, 0]).clamp(true);\n\n\t\t\tthis.x.domain(data.map(function(d) { return d.x; }));\n      this.y.domain([this.axisConfig.y.start || 0, \n        d3.max(data, function(d) { return d.y; })]);\n\t\t},\n\t\t_drawAxes(data) {\n      let x= this.x, y=this.y, me = this, d3 = Px.d3;\n      if(!this.margin.top) {\n        this._setDefaultMargin();\n      }\n\t\t\t// Add the X Axis\n      this.xAxis = d3.axisBottom(x);\n      let _xAxis = this.xAxis;\n\t\t\tif(this.axisConfig.x.ticks) {\n\t\t\t\t_xAxis.ticks(this.axisConfig.x.ticks);\n\t\t\t}\n\t\t\tthis.svg.append(\"g\")\n\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + this.adjustedHeight + \")\")\n\t\t\t\t\t.attr(\"class\", \"x-axis\")\n\t\t\t\t\t.call(_xAxis);\n\n      // Add the Y Axis\n      this.yAxis = d3.axisLeft(y);\n\t\t\tlet _yAxis = this.yAxis;\n\t\t\tif(this.axisConfig.y.ticks) {\n\t\t\t\t_yAxis.ticks(this.axisConfig.y.ticks);\n\t\t\t}\n\t\t\tthis.svg.append(\"g\")\n\t\t\t\t\t.attr(\"class\", \"y-axis\")\n\t\t\t\t\t.call(_yAxis);\n\n\t\t\tthis.svg.append(\"text\")\n\t\t\t\t\t.attr(\"transform\", \"rotate(-90)\")\n\t\t\t\t\t.attr(\"y\", -this.margin.left)\n\t\t\t\t\t.attr(\"x\", 0 - (this.adjustedHeight / 2))\n\t\t\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t\t\t.attr(\"class\", \"yaxis-label\")\n\t\t\t\t\t.text(this.unit);\n    },\n    drawBars(data) {\n      let x= this.x, y=this.y, me = this, d3 = Px.d3;\n      this.svg.selectAll(\".bar\")\n        .data(data)\n        .enter().append(\"rect\")\n          .attr(\"class\", \"bar\")\n          .attr(\"x\", (d) => { return x(d.x); })\n          .attr(\"y\", (d) => { return y(d.y); })\n          .style(\"fill\", (d, i) => {\n            if(this.axisConfig.x.series && this.axisConfig.x.series.length > i) {\n              return this.axisConfig.x.series[i].color || \"steelblue\";\n            }\n            return \"steelblue\";\n          })\n          .attr(\"width\", x.bandwidth())\n          .attr(\"height\", (d) => { return this.adjustedHeight - y(d.y); })\n          .on('click', function(d, i) {\n            if(me.axisConfig.x.selectionColor) {\n              d3.select(this).style(\"fill\", me.axisConfig.x.selectionColor);\n              if(me._selections[i]) {\n                let color = \"steelblue\";\n                if(me.axisConfig.x.series && me.axisConfig.x.series.length > i) {\n                  color = me.axisConfig.x.series[i].color || \"steelblue\";\n                }\n                d3.select(this).style(\"fill\", color);\n              }\n            }\n            if(me._selections[i]) {\n              delete me._selections[i];\n              me._selections.total--;\n            } else {\n              me._selections[i] = true;\n              me._selections.total++;\n            }\n            me.fire(\"bar-clicked\", {\"point\": d, \"data\": data, \n              \"index\": i, \"selections\": me._selections});\n          });\n    },\n\t\t_drawGridLines(data) {\n\t\t\tlet x= this.x, y=this.y, me = this, d3 = Px.d3;\n      if(!this.axisConfig.x.hideGrid) {\n        this.svg.append(\"g\")\n\t\t\t\t\t.attr(\"class\", \"grid x-grid\")\n          .call(d3.axisBottom(x)\n              .ticks(this.axisConfig.x.totalGridLines || 5)\n              .tickSize(this.adjustedHeight)\n              .tickFormat(\"\"));\n      }\n\n      if(!this.axisConfig.y.hideGrid) {\n        this.svg.append(\"g\")\n\t\t\t\t\t.attr(\"class\", \"grid y-grid\")\n          .call(d3.axisLeft(y)\n              .ticks(this.axisConfig.y.totalGridLines || 5)\n              .tickSize(-this.adjustedWidth)\n              .tickFormat(\"\"));\n      }\n\t\t}\n  });\n})();\n"]}